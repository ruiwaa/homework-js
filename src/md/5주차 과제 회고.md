# 5주차 과제 회고

<div style = "padding: 20px">
  ## 1.마크업
  
  처음에 각자의 컨텐츠니깐 article 요소로 세 개의 컨텐츠를 만들어줬는데, 해당 카드가 클릭이 되어야 하기때문에,a 요소 안에 플랜 카드의 각 요소를 작성하는 것으로 바꿨다. 하지만 다시 생각해보니 카드 전체가 링크일 필요는 없을 것 같아서 어떻게 할까 고민하다가 선생님이 주신 파일에 마크업을 보았다. a요소가 아닌 div 안에 각각의 아티클 요소를 만들어주었고, 내부에 버튼 요소를 추가하여 클릭할 수 있게 만든 구조로 코드를 작성하신 것을 발견했다. 그래서 저도 다시 내가 만든 코드를 참고하여 수정을 하였다.
  
  ```
  <수정 전>
  <a href="/" class="plan-card" data-name="price-card-2">
          <div class="card-wrapper">
            <h2>STANDARD</h2>
            <span class="plan-price">₩15000</span>
  
            <ul>
              <li>모든 기능 무제한</li>
              <li>광고 제거</li>
              <li>이메일 고객 지원</li>
              <li>데이터 내보내기</li>
            </ul>
          </div>
        </a>
  
  ```
  
  ```
  <수정 후>
  <div class="card-wrapper">
          <article class="plan-card" data-name="price-card-1">
            <h2 class="plan-option" aria-label="베이직 멤버쉽">BASIC</h2>
            <span class="plan-price" aria-label="베이직 멤버쉽 가격">Free</span>
            <ul class="plan-details">
              <li>기본 대시보드 제공</li>
              <li>월 10회 리포트</li>
              <li>커뮤니티 지원</li>
            </ul>
            <button
              type="button"
              class="plan-price-button"
              aria-label="베이직 플랜 선택"
              aria-pressed="false"
            ></button>
          </article>
        </div>
  
  ```
  
  1. 스크린 리더가 해당 요소의 텍스트를 읽었을 때 어떤 것을 설명해주는 것인지에 대한 부연을 aria-label을 사용했다.
     그런데 aria-label을 너무 남용한 거 아닌지에 대한 의문이 든다. 접근성은 아직 생소하다... 적절한 접근성 기능들을 배치하고 싶은데 넣고 나서 개발자도구로 확인해보는 과정의 연속이다.
  --> aria-label은 해당 요소의 텍스트 대신 읽어주는 것이기때문에 명시적으로 적어줘야 한다.!!!!!!
  2. article 요소에는 직접적으로 탭을 수행할 수 없어, 마크업에서 tabindex="0" 를 각 article에 추가해줬다.
  3. 아티클에 초점이 가야할 필요는 없으니 tabindex 값을 삭제한다. (선생님과의 코드 분석 이후 알게 된 점)
  
  ## CSS
  
  스타일링을 하면서 li요소를 꾸미는 기능을 새롭게 알게 되었다.
  
  > 1. marker
  > 2. ist-style-position: inside;
  >    리스트 기본 스타일을 가상요소로 바꿔야지 했는데, 이미지를 삽입할까 하다가 다른 방법이 없을까라는 생각이 들어
  >    찾아보았는데, 이렇게 리스트 요소 앞의 스타일을 설정할 수 있는 기능들이 있어서 신기했다.
  
  피그마 시안과 거의 똑같이 만들고 싶었는데, 플랜 카드 안에 가격 밑에 부분과 ul요소 윗부분에 각각 25px를 넣는 방법을 모르겠다.. 그래서 결국 한번밖에 마진을 못 줬다.
  
  ## Javascript
  
  이번 주 수업 진도는 이벤트 심화와 유용한 기능에 대해 배웠는데, 확실히 이벤트의 응용된 기능을 배우다보니깐, 이해가 바로 바로 되질 않았다.
  이제껏 과제를 수행할 때 마크업과 스타일링이 자바스크립트를 만드는 시간보다 더 많이 들었는데, 이번 과제는 자바스크립트에 시간을 더 쏟았다.
  각 컴포넌트가 상호작용을 해야 하는 기능을 만들고, 추가해야 할 이벤트들이 많고, 특히나 이번 주차에 배운 개념들을 사용해야 되서 그 부분이 어려웠다.
  컴포넌트를 보면 대략 어떤 식으로 자바스크립트 로직을 짜면 되는지에 대한 구상이 조금씩 잡히는데, 이번에는.. 바로 생각이 나질 않았다.
  그래서 주석을 한 줄 한 줄 추가하면서 진행을 했다.
  마지막 과제인만큼 이제까지 이렇게 한 컴포넌트에 많은 함수와 이벤트를 연결해본 건 처음인 것 같다.
  
  ### 1) 가격값 타입 변환
  ```
  plan-price 가격 쉼표 추가
  for(const price of priceNumber){
    const changeNum = Number(price.textContent)
    if(!isNaN(changeNum) ){
      price.textContent = '₩' + changeNum.toLocaleString()
    }
  }
  ```
  
</div>
-> 플랜값이 문자값, 숫자값 이렇게 두 종류의 타입이 있었는데, 한번에 값을 변환시키려니깐, 
무료 플랜값이 NaN가 나왔다. 다르게 주기 위해서 숫자값으로 전환한 값이 NaN이 아닐 때에만 값사이에 쉼표를 추가해주는 방향으로 만들었다. false에 대한 경우의 값을 반환하는 조건문을 작성하지 않고, 기존의 문자값은 그대로 보여지게 했다. 


### 2) 함수 생성
  ```
  함수 생성 순서는 다음과 같이 만들었다.
  // 1) 이전에 선택된 카드 비활성화 함수 만들기 -> 카드와 아이콘에 클래스명 제거
  // 2) 속성 제어 함수 만들기 -> 속성 추가/제어
  // 3) 플랜 카드 클릭 이벤트 핸들러 함수 -> 현재 플랜 카드 활성화되었을 시 추가될 기능 구현
  // 3) 플랜 카드 클릭 이벤트 핸들러 함수 
const handleSelect = (card) => {
const icon = card.previousElementSibling

  // 3-1 선택되지 않은 플랜 카드 비활성화
  planCards.forEach((selectedCard) => {
    if(selectedCard !== card) {
      removeSelected(selectedCard)
    }
  })

  // 3-2 현재 플랜 카드 활성화되었을 시 추가될 기능들
    //3-2-1 플랜 카드에 active 클래스명 추가
  card.classList.add('active')
    //3-2-2 아이콘에 active 클래스명 추가
  icon.classList.add('active')
    //3-2-3 플랜 카드에 속성 설정(아티클에 탭속성 추가)
  setAttr(card, 'tabindex', '0') 
    //3-2-4 선택 버튼 클릭 후 옵션 선택 텍스트의 hidden 속성 삭제
  removeAttr(selectedOption,'hidden',null) 
  
    //3-2-5 버튼에 aria-pressed 속성 추가
  const button = card.querySelector('.plan-price-button')
  if(button) {
  setAttr(button, 'aria-pressed', 'true')
}
  
}

  
  ```
최종적으로 이벤트에 이 함수들을 추가해줄 때 3개의 아티클 요소를 클릭할 때마다 그 클릭된 아티클 요소의 정보가 나와줘야 하기때문에 이벤트에 forEach를 이용해서 card라는 변수를 만들거기 때문에 함수의 매개변수에 미리 card를 넣어줬다. 

### 3) 아쉬운 점
  ````
  // 4) 플랜 카드 선택시 나타내는 선택된 옵션 박스 함수
  // 기능: 각 플랜카드 선택 시 다른 텍스트가 표시 되어야 함

  const showOptionInfo = function (card){
  // 필요한 변수 할당
      const cardParentElement = card.parentElement
      const wrpperParentElement = cardParentElement.parentElement
      const optionInfo = wrpperParentElement.nextElementSibling
      const dataPrice =  card.querySelector('.plan-price')
      const priceValue = dataPrice.dataset.price
      const membership = card.querySelector('.plan-option')
      const membershipValue = membership.textContent
      const strong = optionInfo.querySelector('#plan-membership')
      const span = optionInfo.querySelector('[data-type="plan-membership"]')

      // 해당 아티클 요소 선택 시 해당 멤버쉽 등급과 가격이 보이도록 설정
      strong? (strong.textContent = `${membershipValue}`): null
      span? span.textContent = `플랜(${priceValue})을 선택하셨습니다.` : null
    }
  ````
이번 주에 배운 탐색을 사용해서 해당 요소를 찾아보려고 하니깐, 변수가 너무 많아졌다. 
이럴때는 바로 strong 과 span 요소를 바로 찾는 선택자를 활용해서 변수를 지정하는 방법밖에 없을까 라는 생각이 들어서 시도를 했는데, 생각보다 너무 많아져버려서 복잡하게 푼 것 같다는 생각이 들었다. 
if 조건문으로 작성할 때 하나의 조건만 있거나 많은 조건이 있을 때 사용하기 편할 것 같고, 삼항 연산자는 참/거짓 조건이 분명하게 있을 때 한 줄로 작성할 때 편리한 것 같다는 생각이 이번 과제를 진행하면서 들었다. 


### 4) 활성화 클래스 추가 했을 때 발생하는 이벤트 & 함수들 연결
active 클래스명이 추가 되었을 때는 요소가 선택되었을 때를 의미하는 것이기때문에 활성화는 클릭/엔터키를 통해서 추가되기때문에 활성화 함수 안에 클릭/엔터 이벤트와 위에 만들었던 함수들을 연결한다.
연결사킨 후 활성화 함수를 호출하여 실행시켜주는 로직으로 마무리를 했다. 
```
const active = () => {
  planCards.forEach((card) => {

    // 클릭 이벤트에 handleSelect & showOptionInfo 함수 연결
    card.addEventListener('click', (e) => {
      handleSelect(e.currentTarget)
      showOptionInfo(e.currentTarget)
    }    
   , {capture: true}) // 버튼을 클릭했을 때 아티클 요소까지 클릭이 될 수 있게 캡쳐링 사용

   

   // 엔터키 이벤트에 handleSelect & showOptionInfo 함수 연결
    card.addEventListener('keydown', (e) => {
      if(e.key === 'Enter') {
        handleSelect(e.currentTarget)
        showOptionInfo(e.currentTarget)
      }
    })
})
}
// 함수 실행
active()
```
해당 아티클을 클릭 또는 엔터키를 누를 때'마다' 이벤트들이 발생해야 하므로, 함수 안에 반복문을 만들어주고, 그 반복문 내부에 클릭/엔터 시 필요한 함수들을 연결해준다. 각 함수들의 매개변수로 card를 줬었는데, card는 현재 반복문의 반복되는 배열의 한 부분을 뜻하므로, article 요소를 뜻한다. 각각 아티클 요소에 이벤트를 걸어줘야 되므로 card에 이벤트를 연결시켜준다. 이때 이벤트의 청취 요소가 card이기 때문에 연결시켜주는 함수의 매개변수에 e.currentTarget를 사용하여 이밴트 청취에 등록된 요소인 card를 불러온다. 또한 클릭 이벤트 부분에 캡쳐링을 사용하여, 아티클 자체에 클릭 기능이 없지만, 버튼에는 있으므로 버튼의 기능을 전파시켜주는 "캡쳐링" 옵션을 사용하여 플랜 카드 옵션의 어디에 마우스 커서를 놓아도 선택이 되도록 만들어 주었다. 


### 5) tabindex 와 inline style 설정 : html에서 해결
버튼에 탭 기능이 있어서, 탭을 두번해야지 다음 아티클 요소로 넘어가는 구조인데, 이렇게 두번이나 탭을 해서 접근하는 환경은 매우 불친절하다는 생각이 들었다. 그래서 자바스크립트에서 선택되지 않은 아티클에 버튼 요소의 탭기능을 제거해주려는 생각으로 작성했는데... 이번에 자바스크립트 코드가 길고 서로 연결되어있는 복잡한 구조여서? 내가 생각한대로 그 기능을 추가해줄 수 있는 함수에 코드를 추가했는데 적용이 되질 않아 마크업의 버튼 요소에 바로 tabindex = '-1'을 주니깐 두시간.. 동안 헤매던 부분이 저 한 줄로 단번에 해결이 되었다. 
또한 strong 요소에 스타일을 줘야 하는데 다시.. 클래스 유틸리티 함수를 만드는 것이 귀찮아서..ㅎ
마크업에 해당 요소에 인라인으로 텍스트 색깔을 바꿔주고 폰트 굵기도 조절해줬다. 이럴때 인라인 스타일이 참 편하구나를 느꼈다.

<blockquote>
아쉬웠던 점 

1. 마크업: 접근성에 대해 조금씩 신경을 써보자고 다짐하고 실천하기 시작한 지가 얼마 안되서, 
적절하게 접근성이 있게 구조를 짜고 있는지 모르겠다. 특히 span 과 p요소에 접근성을 추가할 때 뭐를 추가해야 할 지 감이 잘 오지 않는다. 마크업은 항상 접근성이 많이 고민된다. 보이지 않는 마크업의 뼈대에 접근성을 고려하여 시각적으로 어려움이 있는 사용자들에게 친절하게 제공할 수 있는 브라우저를 만들 수 있는 사람이 되고 싶다. 
2. 스타일링: 개발자가 되면 디자인 시안에 맞춰서 정확하게 구현해내줘야 하는데, 매 과제마다 항상 완벽하게 만들어내지 못해서 속상하다. 응용하는 부분이 너무 어려운 것 같다. 
3. 자바스크립트: forEach을 남발한 코드 로직이 아닌가 라는 생각이 든다. 이번주에 배운 부분들을 많이 활용해서 과제를 수행해야 하는데, 이벤트의 심화된 기능을 많이 활용하지 못한 것 같다. 
그리고 여러 이벤트를 추가할 때는 그 이벤트에 맞는 함수들을 따로 만들어서 작성하니깐, 이벤트 추가하는 부분이 깔끔해서 보기 좋았다. 하지만 내가 작성한 코드를 좀 더 간결하고 명확하게 수정할 수 있는지에 대해 스스로 고민하고 분석해보는 능력을 아직... 많이 부족하다. 컴포넌트 완성하는 것만으로도 늘 어려워서 여러 컴포넌트들을 만들어보면서 어느정도 각 컴포넌트에 필요한 구성에 익숙해져서 더 나은 코드를 작성하는 단계에 진입하고 싶다. 
</blockquote>