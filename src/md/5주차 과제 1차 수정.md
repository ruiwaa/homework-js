# 선생님 피드백 후 코드 수정
## 내 코드의 문제점
1. HTML
1) tabindex 속성 삭제
버튼은 탭키로 본래 접근이 가능한 요소인데, 아티클 요소 내부에 있다는 것에 집중하여 아티클에 탭키 초점이 가야된다고 생각을 했다. 
그래서 버튼에 탭기능을 없애버리고 아티클 요소에 맘대로 줘버렸다. 아티클 요소와 버튼 요소의 탭 속성을 삭제해줬다.
2) aria-label 명시화
스크린 리더는 마크업 문서의 요소 안에 쓴 텍스트는 읽어줄 거라고 생각해서, aria-label을 모호하게 설명을 넣었다. 오늘 1대 1로 코드 리뷰?를 받으면서 aria-label은 해당 텍스트 위에 덮어씌우는 기능을 한다고, 그래서 스크린 리더는 해당 텍스트 내용이 아닌, 아리아 라벨을 읽어준다고 한다. aria-label aria-labeledby 이 두 가지를 적절하게 그리고 명시적으로 적어야겠다. 
그리고 스크린 리더기의 흐름에 대해서 배울 수 있었다. 

2. CSS 
1) 버튼을 article 요소 위에 덮기
요소의 본래의 기능을 탄탄하게 구성을 잡고, 버튼의 작은 면적을 어떻게 키울 것인가에 대해서는 css를 배제하고 마크업에서만 해결하려고 하니, 
자바스크립트 코드가 더욱 복잡해졌던 것 같다. 버튼을 article 요소에 포갤 수도 있지 않을까? 라는 선생님의 의견을 듣고 머릿속에 느낌표가  생겼다.
이렇게도 할 수 있다는 방식의 폭이 한층 넓어진 것 같다. 그래서 버튼의 부모 요소인 아티클에 positon:relative를 주고 버튼에는 absolute를 줘서 크기와 높이를 지정해주고, 
focus-visible 상태일 때에 outline을 스타일링 해줬다. 
2) absolute 적용 후 크기 조절
absolute로 크기 조절을 한 후에 브라우저를 확인해보니 1번째 아티클 크기가 작아져 있었다. 그래서 마크업 구조를 보면서 부모 위에 부모한테 다시 크기 조정해주고 해도, 
아무러 변화가 없길래, 내 스타일링을 검토해달라고 ai에게 물어보니, svg가 active일 때만 position:absolute를 줘서 클릭을 할 때와 안 할때의 크기 차이가 있었던 것이다. 
그래서 그 부분을 활성화에서 빼왔더니 해결이 되었다. 

3.JavaScript
1) 이벤트 위임(Event Delegation) 적용
```
수정 전
javascriptplanCards.forEach((card) => {
  card.addEventListener('click', (e) => {
    handleSelect(e.currentTarget)
    showOptionInfo(e.currentTarget)
  }, {capture: true})

  card.addEventListener('keydown', (e) => {
    if(e.key === 'Enter') {
      handleSelect(e.currentTarget)
      showOptionInfo(e.currentTarget)
    }
  })
})
```
문제점: 각 카드마다 개별 리스너 등록 → 메모리 비효율
이벤트 위임을 어떻게 사용해야 될지 모르겠어서, 결국 과제 수행할 때는 사용하지 못했는데, 오늘 수업에서 이벤트 위임을 자주 보게 되니깐 조금씩 감이 잡혔다. 
아티클 부모 요소에 이벤트를 생성한 후, 아티클은 이미 버튼과 포개져 있는 상태이므로, 아티클의 어딜 눌러도 버튼을 누른 것과 같기 때문에, 
closest 메서드를 사용하여 아티클을 찾아와서 이벤트 위임을 해주었다.

```
수정 후
planCardsContainer.addEventListener('click', (e) => {
  const planCardEvent = e.target.closest('.plan-card')
  if(!planCardEvent) return 
  handleSelect(planCardEvent)
  showOptionInfo(planCardEvent)
})
```
2) 함수 매개변수 수정
각 함수마다 매개변수를 다 다르게 적어서, 이벤트 위임으로 수정을 하고나니 여기저기서 오류가 발생했다. 
이벤트에 연결되는 두 함수의 매개변수명을 수정하고, 밑에 매개변수명에 따라서 선택한 요소 선택자도 다시 수정을 하여서, 통일을 하였다. 


>느낀 점
뒤죽박죽 해보였던 코드가 일관성 있는 흐름이란게 조금 눈에 보이게 바뀐 것 같다. 전역에 선언했던 변수 개수도 줄었다. 
이벤트 위임을 사용하니 그 타켓에 맞춰서 요소를 선택하면 되서 전역에 할당해줘야할 변수들이 많이 필요가 없었다. 
아직은 컴포넌트를 이렇게 뼈대,스타일링,제어하는 부분을 다 고려해서 만들어 본 지 얼마되지 않아서 이런 저런 방향으로 떠올리는 것이 쉽게 되진 않는 것 같다. 
유연하게 생각할 수 있게 계속해서 연습... 만이 방법일 것 같다. 